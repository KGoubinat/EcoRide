import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { useState, useEffect } from "react";
import { useParams } from "react-router-dom";
import { Badge } from "@/components/ui/badge";

export default function CovoiturageDetail() {
  const { id } = useParams();
  const [covoiturage, setCovoiturage] = useState(null);

  useEffect(() => {
    fetch(`/api/covoiturages/${id}`)
      .then((res) => res.json())
      .then((data) => setCovoiturage(data));
  }, [id]);

  if (!covoiturage) return <p>Chargement...</p>;

  return (
    <div className="max-w-3xl mx-auto p-6">
      <Card>
        <CardHeader>
          <CardTitle>
            Trajet de {covoiturage.depart} à {covoiturage.destination}
          </CardTitle>
        </CardHeader>
        <CardContent>
          <p><strong>Date :</strong> {covoiturage.date}</p>
          <p><strong>Départ :</strong> {covoiturage.heure_depart}</p>
          <p><strong>Arrivée :</strong> {covoiturage.heure_arrivee}</p>
          <p><strong>Durée :</strong> {covoiturage.duree}</p>
          <p><strong>Prix :</strong> {covoiturage.prix} €</p>
          <p><strong>Places restantes :</strong> {covoiturage.places_restantes}</p>
        </CardContent>
      </Card>

      <Card className="mt-4">
        <CardHeader>
          <CardTitle>Conducteur : {covoiturage.conducteur}</CardTitle>
        </CardHeader>
        <CardContent>
          <p><strong>Note :</strong> {covoiturage.note} / 5</p>
          <p><strong>Avis :</strong> {covoiturage.avis || "Pas encore d'avis"}</p>
          <p><strong>Préférences :</strong> {covoiturage.preferences || "Non spécifiées"}</p>
        </CardContent>
      </Card>

      <Card className="mt-4">
        <CardHeader>
          <CardTitle>Véhicule</CardTitle>
        </CardHeader>
        <CardContent>
          <p><strong>Marque :</strong> {covoiturage.voiture_marque}</p>
          <p><strong>Modèle :</strong> {covoiturage.voiture_modele}</p>
          <p><strong>Énergie :</strong> {covoiturage.voiture_energie}</p>
        </CardContent>
      </Card>
    </div>
  );
}
